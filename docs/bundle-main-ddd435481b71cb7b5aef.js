var Demo;!function(){var e={75:function(e){(function(){var n,t,r,o,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(n()-i)/1e6},t=process.hrtime,o=(n=function(){var e;return 1e9*(e=t())[0]+e[1]})(),a=1e9*process.uptime(),i=o-a):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}},n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{}};return e[r].call(o.exports,o,o.exports,t),o.exports}t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";t.r(r);var e=t(75),n=t.n(e);function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=/^(#)?([0-9a-f]+)$/i;function a(e){var n=e.toString(16);return 1===n.length?"0"+n:n}function u(e,n,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?e+6*(n-e)*t:t<.5?n:t<2/3?e+(n-e)*(2/3-t)*6:e}var s,c,v,f,l,d,m,p,x,h,y,g,w,b,_=function(){function e(n,t,r){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.r=void 0,this.g=void 0,this.b=void 0,this.r=n,this.g=t,this.b=r}var n,t,r;return n=e,r=[{key:"validate",value:function(n){var t;if("string"!=typeof n||!(t=i.exec(n)))return null;var r=t[2];return 3===r.length?new e(17*parseInt(r[0],16),17*parseInt(r[1],16),17*parseInt(r[2],16)):6===r.length?new e(parseInt(r.substring(0,2),16),parseInt(r.substring(2,4),16),parseInt(r.substring(4,6),16)):null}},{key:"from",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(n)){for(var r=n.length,o=new Float32Array(3*r),i=t/255,a=0,u=0;u<r;u++){var s=e.from(n[u]);o[a++]=s.r*i,o[a++]=s.g*i,o[a++]=s.b*i}return o}var c=e.validate(n);if(!c)throw new Error("Invalid color "+n);return c.r*=t,c.g*=t,c.b*=t,c}},{key:"fromHSL",value:function(n,t,r){var o,i,a;if(t<=0)o=i=a=r;else{var s=r<.5?r*(1+t):r+t-r*t,c=2*r-s;o=u(c,s,n+1/3),i=u(c,s,n),a=u(c,s,n-1/3)}return new e(Math.round(255*o),Math.round(255*i),Math.round(255*a))}}],(t=[{key:"mix",value:function(n,t,r){return r||(r=new e),r.r=this.r+(n.r-this.r)*t|0,r.g=this.g+(n.g-this.g)*t|0,r.b=this.b+(n.b-this.b)*t|0,r}},{key:"multiply",value:function(n,t){return t||(t=new e),t.r=this.r*n,t.g=this.g*n,t.b=this.b*n,t}},{key:"toRGBHex",value:function(){return"#"+a(this.r)+a(this.g)+a(this.b)}},{key:"toHex",value:function(){return(this.r<<16)+(this.g<<8)+this.b}}])&&o(n.prototype,t),r&&o(n,r),e}(),E=(Math.sqrt(5),Math.PI,{width:0,height:0}),T=0,A=0;function I(){var e=window.innerWidth/2&-16,n=window.innerHeight/2|0;E.width=e,E.height=n,s.width=e,s.height=n,T=e/2,A=n/2,s.style.width=window.innerWidth+"px",s.style.height=window.innerHeight+"px",c.viewport(0,0,s.width,s.height)}function R(e,n,t){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.error(e.getShaderInfoLog(r)),e.deleteShader(r)}function L(e){var t=h?1:-1;c.uniform1f(l,n()()/1e3),c.uniform2f(d,E.width,E.height),c.uniform4f(m,T,E.height-A,y*t,(E.height-g)*t),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT);var r=c.TRIANGLES;c.drawArrays(r,0,6),requestAnimationFrame(L)}function S(e){h&&(T=e.clientX-w.left+self.pageXOffset,A=e.clientY-w.top+self.pageYOffset)}function z(e){h=!0,y=e.clientX-w.left+self.pageXOffset,g=e.clientY-w.top+self.pageYOffset,T=y,A=g}function D(e){h=!1}window.onload=function(){if(s=document.getElementById("screen"),!(c=s.getContext("webgl2")))return s.parentNode.removeChild(s),"Cannot run shader. Your browser does not support WebGL2.",void(document.getElementById("out").innerHTML="<p>Cannot run shader. Your browser does not support WebGL2.</p>");var e=R(c,c.VERTEX_SHADER,"#version 300 es\n#define GLSLIFY 1\n\n// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nin vec4 a_position;\n\n// all shaders have a main function\nvoid main() {\n\n    // gl_Position is a special variable a vertex shader\n    // is responsible for setting\n    gl_Position = a_position;\n}\n"),n=R(c,c.FRAGMENT_SHADER,"#version 300 es\nprecision lowp float;\n#define GLSLIFY 1\n\nuniform float u_time;\nuniform vec2 u_resolution;\nuniform vec4 u_mouse;\nuniform vec3 u_palette[8];\nuniform sampler2D u_env;\n\nconst float pi = 3.141592653589793;\nconst float tau = pi * 2.0;\nconst float invTau = 1.0 / tau;\nconst float hpi = pi * 0.5;\nconst float phi = (1.0+sqrt(5.0))/2.0;\n\nout vec4 outColor;\n\n////////////////////// NOISE\n\n//\tSimplex 3D Noise\n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n    // First corner\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n    // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n\n    //  x0 = x0 - 0. + 0.0 * C\n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n    // Permutations\n    i = mod(i, 289.0 );\n    vec4 p = permute( permute( permute(\n    i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n    + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n    + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n    // Gradients\n    // ( N*N points uniformly over a square, mapped onto an octahedron.)\n    float n_ = 1.0/7.0; // N=7\n    vec3  ns = n_ * D.wyz - D.xzx;\n\n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n\n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n\n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n\n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n\n    //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n\n    // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n    dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat rand(float n){return fract(sin(n) * 43758.5453123);}\n\nvoid main(void)\n{\n    vec2 uv = (gl_FragCoord.xy * ratio - .5 * u_resolution.xy * ratio)/min(u_resolution.x,u_resolution.y);\n    vec2 m = u_mouse.xy/u_resolution.xy;\n\n    outColor = vec4(\n        vec3(uv,0),\n        1.0\n    );\n\n    //outColor = vec4(1,0,1,1);\n}\n");f=function(e,n,t){var r=e.createProgram();if(e.attachShader(r,n),e.attachShader(r,t),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.error(e.getProgramInfoLog(r)),e.deleteProgram(r)}(c,e,n);var t=c.getAttribLocation(f,"a_position"),r=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,r),c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,1,1,-1]),c.STATIC_DRAW),v=c.createVertexArray(),c.bindVertexArray(v),c.enableVertexAttribArray(t);var o=c.FLOAT;c.vertexAttribPointer(t,2,o,!1,0,0),I(),c.viewport(0,0,c.canvas.width,c.canvas.height),b=c.createTexture();var i=document.getElementById("env");console.log({envImage:i}),c.bindTexture(c.TEXTURE_2D,b),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,4096,2048,0,c.RGBA,c.UNSIGNED_BYTE,i),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR_MIPMAP_NEAREST),c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null),l=c.getUniformLocation(f,"u_time"),d=c.getUniformLocation(f,"u_resolution"),m=c.getUniformLocation(f,"u_mouse"),p=c.getUniformLocation(f,"u_palette"),x=c.getUniformLocation(f,"u_env"),c.useProgram(f),c.bindVertexArray(v),window.addEventListener("resize",I,!0),s.addEventListener("mousemove",S,!0),s.addEventListener("mousedown",z,!0),document.addEventListener("mouseup",D,!0),window.addEventListener("touchstart",z,!0),window.addEventListener("touchmove",S,!0),window.addEventListener("touchend",D,!0),w=document.getElementById("screen").getBoundingClientRect();var a=_.from(["#010101","#fff","#fff","#014d9d","#666666","#fff","#f0f","#0f0"],1);c.uniform3fv(p,a),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,b),c.uniform1i(x,0),requestAnimationFrame(L)}}(),Demo=r}();
//# sourceMappingURL=bundle-main-ddd435481b71cb7b5aef.js.map